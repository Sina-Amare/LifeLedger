{% extends 'base.html' %}

{% block title %}My Journal{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-4xl font-bold text-text-light dark:text-text-dark mb-8">My Journal Entries</h1>

    {# Link to create a new journal entry #}
    <div class="mb-6 text-right">
        <a href="{% url 'journal:journal_create' %}" class="inline-block px-6 py-3 bg-primary-light text-white rounded-md hover:bg-primary-dark transition duration-300 font-semibold shadow-md">
            + Write New Entry
        </a>
    </div>

    {# Check if there are any journal entries #}
    {% if journal_entries %}
        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
            {# Loop through each journal entry #}
            {% for entry in journal_entries %}
                <div class="bg-card-light dark:bg-card-dark p-6 rounded-xl shadow-custom-light dark:shadow-custom-dark flex flex-col">
                    {# Link to the detail view of the entry #}
                    <a href="{% url 'journal:journal_detail' pk=entry.pk %}" class="block hover:underline">
                        <h2 class="text-2xl font-semibold text-primary-light dark:text-primary-dark mb-2 truncate">{{ entry.title|default:"Untitled Entry" }}</h2>
                    </a>
                    {# Display a snippet of the content #}
                    <p class="text-text-light dark:text-text-dark text-sm mb-4 flex-grow">{{ entry.content|truncatechars:200 }}</p>

                    {# Metadata: Date, Mood, Location (if available) #}
                    <div class="text-sm text-gray-600 dark:text-gray-400 mt-auto">
                        <p class="mb-1">
                            <i class="far fa-calendar-alt mr-1"></i> {# Calendar icon #}
                            {{ entry.created_at|date:"F j, Y" }} at {{ entry.created_at|date:"P" }}
                        </p>
                        {% if entry.mood %}
                            <p class="mb-1">
                                <i class="far fa-smile mr-1"></i> {# Smile icon #}
                                Mood: {{ entry.mood }}
                            </p>
                        {% endif %}
                        {% if entry.location %}
                            <p class="mb-1">
                                <i class="fas fa-map-marker-alt mr-1"></i> {# Map marker icon #}
                                Location: {{ entry.location }}
                            </p>
                        {% endif %}
                        {# Placeholder for AI Quote/Favorite status - Will be styled later #}
                        {% if entry.ai_quote %}
                             <p class="italic mt-2 text-gray-700 dark:text-gray-300">"{{ entry.ai_quote|truncatechars:100 }}"</p>
                        {% endif %}
                         {% if entry.is_favorite %}
                             <p class="text-yellow-500 mt-2"><i class="fas fa-star mr-1"></i> Favorite</p> {# Star icon #}
                         {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        {# Message if no journal entries are found #}
        <div class="text-center text-text-light dark:text-text-dark">
            <p class="text-xl mb-4">You haven't written any journal entries yet.</p>
            <a href="{% url 'journal:journal_create' %}" class="inline-block px-6 py-3 bg-primary-light text-white rounded-md hover:bg-primary-dark transition duration-300 font-semibold shadow-md">
                Start Your First Entry
            </a>
        </div>
    {% endif %}
</div>
{% endblock %}
